<!DOCTYPE html>

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title></title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="css/jquery.mobile-1.4.5.min.css">
  <script src="js/jquery.js"></script>
  <script src="js/jquery.mobile-1.4.5.min.js"></script>

  <meta name="referrer" content="no-referrer">

  <style>
    .avatar {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      
    }

    .item:hover {
      background-color: lightgray;
      cursor: pointer;
    }

    
  </style>

  <script>
    var onReady = function() {
      $.get("http://127.0.0.1:5000/get_all_msg",
        function (data, status) {

          if (status != 'success') return;
          //console.log(data);
          var json = JSON.parse(data);
         
          $("#mainlist").empty();

          json.forEach( function(element) {
            
            var avatar = $("<img src=''/>")
              .attr("src", element.avatar)
              .attr("class", "avatar");
            
            var title = $("<h2></h2>")
              .html(element.title);

              var author = $("<p></p>")
                .attr("class", "ui-li-aside")
                .html(element.author);
            
            var item = $("<li></li>").append(avatar)
              .append(title)
              .append(author)
              .attr("data-type", "horizontal")
              .attr("class", "ui-li-static ui-body-inherit ui-li-has-thumb item");


            $("#mainlist").append(item);
              
          });

        });
    }

    
    $(document).ready(onReady);
  </script>



</head>

<body>

  <div data-role="page">
    <div data-role="header">
      留言板样例
    </div>

    <div data-role="content" class="ui-content">
      <ul data-role="listview" id="mainlist">
        <li>
             <img src="../img/blackberry_10.png">
                     <h2>BlackBerry 10</h2>
                      <p>BlackBerry launched the Z10 and Q10 with the new BB10 OS</p>
                       <p class="ui-li-aside">BlackBerry</p>
                   </li>
                 <li>
                     <img src="../img/lumia_800.png" class="ui-li-thumb">
                    <h2>WP 7.8</h2>
                       <p>Nokia rolls out WP 7.8 to Lumia 800</p>
                       <p class="ui-li-aside">Windows Phone</p>
                  </li>
                <li>
                    <img src="../img/galaxy_express.png" class="ui-li-thumb">
                     <h2>Galaxy</h2>
                       <p>New Samsung Galaxy Express</p>
                      <p class="ui-li-aside">Samsung</p>
                 </li>
              </ul>
    </div>

    <div data-role="footer" data-position="fixed" data-tap-toggle="false">
      <nav data-role="navbar">
        <ul>
          <li><a href="#" class="ui-btn-active">列表</a></li>
          <li><a href="#">留言</a></li>
          <li><a href="#">工具</a></li>
        </ul>
      </nav>
    </div>
  </div>

</body>

</html>